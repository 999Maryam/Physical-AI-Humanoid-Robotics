# Data Model: RAG Backend-Frontend Integration

## Core Entities

### Query
- **Description**: User input sent to the RAG system containing questions or information requests
- **Fields**:
  - `query`: string (required) - The user's question or information request
- **Validation**:
  - Must not be empty
  - Maximum length: 1000 characters (to prevent overly long requests)
- **Source**: User input from frontend interface

### RAG Response
- **Description**: Structured response from the backend containing relevant information retrieved and generated by the RAG system
- **Fields**:
  - `response`: string (required) - The grounded answer generated by the RAG system
  - `status`: string (optional) - Status of the request (e.g., "success", "error", "not_found")
  - `error_message`: string (optional) - Error details if the request failed
- **Validation**:
  - Response must be grounded in retrieved documents
  - If no relevant documents found, response should be "I don't know"
- **Source**: Generated by `create_rag_response()` function using retrieved documents

### Communication Channel
- **Description**: HTTP-based connection between frontend and FastAPI backend for exchanging queries and responses
- **Properties**:
  - Protocol: HTTP/HTTPS
  - Method: POST for queries, GET for health checks
  - Endpoint: `/ask` for RAG queries, `/` for health check
  - Content-Type: application/json
- **Validation**:
  - Request must contain valid JSON
  - Response must contain valid JSON
  - Proper CORS headers for frontend communication

## API Data Flow

### Request Structure
```
POST /ask
{
  "query": "string (required)"
}
```

### Response Structure
```
{
  "response": "string (required)",
  "status": "string (optional)",
  "error_message": "string (optional)"
}
```

## Relationships

- **Query → RAG Response**: One-to-one relationship where each query generates one response
- **Communication Channel → Query/RAG Response**: The channel facilitates the exchange between query and response entities

## State Transitions

### Query States
1. **Pending**: Query submitted by user but not yet processed
2. **Processing**: Query being processed by RAG system
3. **Completed**: RAG system has generated response
4. **Error**: Error occurred during processing

### RAG Response States
1. **Not Generated**: No response yet created
2. **Generated**: Response created by RAG system
3. **Delivered**: Response sent back to frontend